This file documents deployment invocation, runtime topology, and operational
boundaries.

Deployment is driven by `deployment/deploy.sh`. The script installs required
tooling, builds the frontend, and installs systemd services. It may be run with
or without elevated privileges, depending on the target environment. Supplying
`.env.production` disables interactive prompting.

Invocation:

deployment/deploy.sh .env.production

In development, services run directly. In production, external traffic enters
through Nginx on port 80 and is proxied to internal services. Nginx is
production-only.

+-----------+------------+-------------+
| Component | Port (dev) | Port (prod) |
+-----------+------------+-------------+
| Frontend  | 5173       | 5173        |
| Backend   | 3000       | 3000        |
| Notifier  | 3001       | 3001        |
| Nginx     | n/a        | 80          |
+-----------+------------+-------------+

Deployed services are managed via systemd and are named `totem-*`.

Operational commands:

systemctl status totem-*
journalctl -u totem-backend -f
systemctl restart totem-*

Deployment is configuration-aware. If `.env.production` is present, re-running
`deploy.sh` will not reconfigure services. Removing the file forces
reconfiguration.

Reconfiguration:

rm .env.production deployment/deploy.sh

Updates are handled by `deployment/update.sh`. The update process stops running
services, pulls the latest repository state, rebuilds dependencies and frontend
assets, and restarts services. Configuration is preserved.

Update invocation:

deployment/update.sh

Teardown is handled by `deployment/cleanup.sh`. Cleanup is destructive.

## Mode / effect

default             preview and confirmation
--services-only     remove systemd services only
--keep-data         remove everything except data
--force             run without confirmation

Invocation:

deployment/cleanup.sh
deployment/cleanup.sh --services-only
deployment/cleanup.sh --keep-data
deployment/cleanup.sh --force
